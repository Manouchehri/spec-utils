language: perl
perl:
  - "5.24"
sudo: false
addons:
  apt:
    packages:
      - libelf-dev

before_install:
  cpanm --quiet --notest Devel::Cover::Report::Coveralls

script:
  cover -test

after_success:
  cover -ignore_re=^/ -ignore_re=^t -report coveralls

#before_script:
#  - export TOOLS_DIR=$(pwd)
#  # download and extract the linux source code.
#  - wget https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.16.7.tar.xz
#  - tar xf linux-4.16.7.tar.xz 
#  # DST_KERNEL is the path to the linux source code
#  - export CURRENT_KERNEL=linux-4.16.7
#  - cd $CURRENT_KERNEL
#  - make defconfig
#  - make modules_prepare
#
#script:
#  - cd $TOOLS_DIR
#  - t/dismember_compile_test.sh
